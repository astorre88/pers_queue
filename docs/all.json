{"shell":true,"revision":"1a9463a0a056674f3f0de418e15c0760ce8ce329","objects":[{"type":null,"source":"lib/mix/que.setup.ex:4","object_type":"ModuleObject","moduledoc":"Creates an Mnesia DB on disk for PersQueue.\n","module":"Elixir.Mix.Tasks.PersQueue.Setup","id":"Mix.Tasks.PersQueue.Setup"},{"type":null,"source":"lib/pers_queue.ex:4","object_type":"ModuleObject","moduledoc":"`PersQueue` is persistent queue with `Mnesia` backend.\n\n\n## Installation\n\n1) Add `pers_queue` to your deps:\n\n```elixir\ndef deps do\n  [\n    {:pers_queue, \"~> 0.0.1\"}\n  ]\nend\n```\n2) Add `pers_queue` to the list of application dependencies:\n\n```elixir\ndef application do\n  [applications: [:pers_queue]]\nend\n```\n\n\n## Persistent Setup\n\nPersQueue runs out of the box, but by default all messages are stored in-memory.\nTo persist messages across application restarts, run the following mix task:\n\n```bash\n$ mix pers_queue.setup\n```\n\nThis will create the Mnesia schema and message database for you.\n\n\n## Usage\n\n```elixir\n# Add message:\nPersQueue.add(\"consumer1\", \"a\")  # => :ok\nPersQueue.add(\"consumer1\", \"b\")  # => :ok\n\n# Get message:\nPersQueue.get(\"consumer1\")       # => %PersQueue.Message{consumer: \"consumer1\", content: \"a\", id: 1}\nPersQueue.get(\"consumer1\")       # => %PersQueue.Message{consumer: \"consumer1\", content: \"b\", id: 2}\n\n# Ack message by message id:\nPersQueue.ack(\"consumer1\", 1)    # => :ok\n\n# Reject message by message id:\nPersQueue.reject(\"consumer1\", 2) # => :ok\n```\n","module":"Elixir.PersQueue","id":"PersQueue"},{"type":null,"source":"lib/pers_queue/message.ex:4","object_type":"ModuleObject","moduledoc":"Module to manage a Message's state.\n\nDefines a `PersQueue.Message` struct.\n","module":"Elixir.PersQueue.Message","id":"PersQueue.Message"},{"type":null,"source":"lib/pers_queue/n_queue.ex:4","object_type":"ModuleObject","moduledoc":"Module to manage a queue.\n\nResponsible for adding, fetching, acknowledging and rejecting messages in queue.\nAlso keeps track of running messages.\n","module":"Elixir.PersQueue.NQueue","id":"PersQueue.NQueue"},{"type":null,"source":"lib/pers_queue/persistence.ex:4","object_type":"ModuleObject","moduledoc":"Mnesia adapter to persist `PersQueue.Messages`s\n","module":"Elixir.PersQueue.Persistence","id":"PersQueue.Persistence"},{"type":null,"source":"lib/pers_queue/server.ex:4","object_type":"ModuleObject","moduledoc":"`PersQueue.Server` is the `GenServer` responsible for processing all messages.\n","module":"Elixir.PersQueue.Server","id":"PersQueue.Server"},{"type":null,"source":"lib/pers_queue/server_supervisor.ex:4","object_type":"ModuleObject","moduledoc":"This Supervisor is responsible for spawning a `PersQueue.Server`\nfor each consumer.\n","module":"Elixir.PersQueue.ServerSupervisor","id":"PersQueue.ServerSupervisor"},{"type":null,"source":"lib/pers_queue/supervisor.ex:4","object_type":"ModuleObject","moduledoc":"This is the `Supervisor` responsible for overseeing the entire\n`PersQueue` application.\n","module":"Elixir.PersQueue.Supervisor","id":"PersQueue.Supervisor"},{"type":"def","source":"lib/mix/que.setup.ex:8","signature":[["_",[],"Elixir"]],"object_type":"FunctionObject","name":"run","module_id":"Mix.Tasks.PersQueue.Setup","id":"run/1","doc":"Setups persistence back.\n","arity":1},{"type":"def","source":"lib/pers_queue.ex:96","signature":[["consumer",[],null],["message_id",[],null]],"object_type":"FunctionObject","name":"ack","module_id":"PersQueue","id":"ack/2","doc":"Acks a message and deletes it from running list.\n\nAccepts the consumer name and message id.\n\n## Example\n\n```\nPersQueue.ack(\"consumer1\", 1) # => :ok\n```\n","arity":2},{"type":"def","source":"lib/pers_queue.ex:66","signature":[["consumer",[],null],["message_content",[],null]],"object_type":"FunctionObject","name":"add","module_id":"PersQueue","id":"add/2","doc":"Enqueues a message to persistent queue.\n\nAccepts the consumer name and message content.\n\n## Example\n\n```\nPersQueue.add(\"consumer1\", \"a\") # => :ok\n\nPersQueue.add(\"consumer2\", \"b\") # => :ok\n```\n","arity":2},{"type":"def","source":"lib/pers_queue.ex:82","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"get","module_id":"PersQueue","id":"get/1","doc":"Gets a message from persistent queue.\n\nAccepts the consumer name.\n\n## Example\n\n```\nPersQueue.get(\"consumer1\") # => %PersQueue.Message{consumer: \"consumer1\", content: \"a\", id: 1}\n```\n","arity":1},{"type":"def","source":"lib/pers_queue.ex:110","signature":[["consumer",[],null],["message_id",[],null]],"object_type":"FunctionObject","name":"reject","module_id":"PersQueue","id":"reject/2","doc":"Rejects a message and moves it to the end of persistent queue.\n\nAccepts the consumer name and message id.\n\n## Example\n\n```\nPersQueue.reject(\"consumer1\", 1) # => :ok\n```\n","arity":2},{"type":"def","source":"lib/pers_queue.ex:59","signature":[["type",[],"Elixir"],["args",[],"Elixir"]],"object_type":"FunctionObject","name":"start","module_id":"PersQueue","id":"start/2","doc":"Starts the PersQueue application\n","arity":2},{"type":"def","source":"lib/pers_queue.ex:2","signature":[["state",[],"Elixir"]],"object_type":"FunctionObject","name":"stop","module_id":"PersQueue","id":"stop/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/message.ex:12","signature":[["consumer",[],null],["content",[],null]],"object_type":"FunctionObject","name":"new","module_id":"PersQueue.Message","id":"new/2","doc":"Returns a new Message struct with defaults\n","arity":2},{"type":"def","source":"lib/pers_queue/n_queue.ex:46","signature":[["q",[],null],["id",[],null]],"object_type":"FunctionObject","name":"ack","module_id":"PersQueue.NQueue","id":"ack/2","doc":"Acknowledges the running message, removes it from running list and returns a queue.\n","arity":2},{"type":"def","source":"lib/pers_queue/n_queue.ex:25","signature":[["q",[],null],["message",[],null]],"object_type":"FunctionObject","name":"add","module_id":"PersQueue.NQueue","id":"add/2","doc":"Adds a message to the `queued` queue.\n","arity":2},{"type":"def","source":"lib/pers_queue/n_queue.ex:33","signature":[["q",[],null]],"object_type":"FunctionObject","name":"get","module_id":"PersQueue.NQueue","id":"get/1","doc":"Gets the next message in queue and returns a queue and message.\n","arity":1},{"type":"def","source":"lib/pers_queue/n_queue.ex:13","signature":[["consumer",[],null],["enqueued",[],null]],"object_type":"FunctionObject","name":"new","module_id":"PersQueue.NQueue","id":"new/2","doc":"Returns a new NQueue with defaults.\n","arity":2},{"type":"def","source":"lib/pers_queue/n_queue.ex:54","signature":[["q",[],null],["id",[],null]],"object_type":"FunctionObject","name":"reject","module_id":"PersQueue.NQueue","id":"reject/2","doc":"Rejects the running message, enqueues it in queued queue and returns a queue and message.\n","arity":2},{"type":"def","source":"lib/pers_queue/persistence.ex:116","signature":[["message_id",[],null]],"object_type":"FunctionObject","name":"delete","module_id":"PersQueue.Persistence","id":"delete/1","doc":"Deletes a `PersQueue.Message` from the database.\n","arity":1},{"type":"def","source":"lib/pers_queue/persistence.ex:96","signature":[],"object_type":"FunctionObject","name":"enqueued","module_id":"PersQueue.Persistence","id":"enqueued/0","doc":"Returns enqueued `PersQueue.Message`s from the database.\n","arity":0},{"type":"def","source":"lib/pers_queue/persistence.ex:102","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"enqueued","module_id":"PersQueue.Persistence","id":"enqueued/1","doc":"Returns all enqueued `PersQueue.Message`s for the given consumer.\n","arity":1},{"type":"def","source":"lib/pers_queue/persistence.ex:108","signature":[["message",[],null]],"object_type":"FunctionObject","name":"insert","module_id":"PersQueue.Persistence","id":"insert/1","doc":"Inserts a `PersQueue.Message` into the database.\n\nReturns the same Message struct with the `id` value set\n","arity":1},{"type":"def","source":"lib/pers_queue/persistence.ex:11","signature":[["\\\\",[],[["nodes",[],null],[["node",[["line",24]],[]]]]]],"object_type":"FunctionObject","name":"setup","module_id":"PersQueue.Persistence","id":"setup/1","doc":"Creates the Mnesia Database for `PersQueue` on disk\n\nThis creates the Schema, Database and Tables for\nPersQueue Messages on disk for the specified erlang nodes so\nMessages are persisted across application restarts.\nCalling this momentarily stops the `:mnesia`\napplication so you should make sure it's not being\nused when you do.\n\nThe database is creates for the current node.\n","arity":1},{"type":"def","source":"lib/pers_queue/persistence.ex:91","signature":[],"object_type":"FunctionObject","name":"start","module_id":"PersQueue.Persistence","id":"start/0","doc":false,"arity":0},{"type":"def","source":"lib/pers_queue/server.ex:34","signature":[["consumer",[],null],["message_id",[],null]],"object_type":"FunctionObject","name":"ack","module_id":"PersQueue.Server","id":"ack/2","doc":"Acks the message.\n","arity":2},{"type":"def","source":"lib/pers_queue/server.ex:18","signature":[["consumer",[],null],["message_content",[],null]],"object_type":"FunctionObject","name":"add","module_id":"PersQueue.Server","id":"add/2","doc":"Creates a new message with the passed content.\n","arity":2},{"type":"def","source":"lib/pers_queue/server.ex:2","signature":[["arg",[],null]],"object_type":"FunctionObject","name":"child_spec","module_id":"PersQueue.Server","id":"child_spec/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/server.ex:2","signature":[["old",[],"Elixir"],["state",[],null],["extra",[],"Elixir"]],"object_type":"FunctionObject","name":"code_change","module_id":"PersQueue.Server","id":"code_change/3","doc":false,"arity":3},{"type":"def","source":"lib/pers_queue/server.ex:113","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"exists?","module_id":"PersQueue.Server","id":"exists?/1","doc":"Checks if the associated with consumer process exists.\n","arity":1},{"type":"def","source":"lib/pers_queue/server.ex:26","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"get","module_id":"PersQueue.Server","id":"get/1","doc":"Gets the message from the head of the queue.\n","arity":1},{"type":"def","source":"lib/pers_queue/server.ex:2","signature":[["msg",[],null],["from",[],"Elixir"],["state",[],null]],"object_type":"FunctionObject","name":"handle_call","module_id":"PersQueue.Server","id":"handle_call/3","doc":"Removes the message from the running list and enqueues it to the queue.\n","arity":3},{"type":"def","source":"lib/pers_queue/server.ex:2","signature":[["msg",[],null],["state",[],null]],"object_type":"FunctionObject","name":"handle_cast","module_id":"PersQueue.Server","id":"handle_cast/2","doc":false,"arity":2},{"type":"def","source":"lib/pers_queue/server.ex:2","signature":[["msg",[],null],["state",[],null]],"object_type":"FunctionObject","name":"handle_info","module_id":"PersQueue.Server","id":"handle_info/2","doc":false,"arity":2},{"type":"def","source":"lib/pers_queue/server.ex:52","signature":[["arg",[],"Elixir"]],"object_type":"FunctionObject","name":"init","module_id":"PersQueue.Server","id":"init/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/server.ex:42","signature":[["consumer",[],null],["message_id",[],null]],"object_type":"FunctionObject","name":"reject","module_id":"PersQueue.Server","id":"reject/2","doc":"Rejects the message.\n","arity":2},{"type":"def","source":"lib/pers_queue/server.ex:10","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"start_link","module_id":"PersQueue.Server","id":"start_link/1","doc":"Starts the message Server\n","arity":1},{"type":"def","source":"lib/pers_queue/server.ex:2","signature":[["reason",[],"Elixir"],["state",[],"Elixir"]],"object_type":"FunctionObject","name":"terminate","module_id":"PersQueue.Server","id":"terminate/2","doc":false,"arity":2},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:49","signature":[["consumer",[],null],["message_id",[],null]],"object_type":"FunctionObject","name":"ack","module_id":"PersQueue.ServerSupervisor","id":"ack/2","doc":"Resends ack task to server.\n","arity":2},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:27","signature":[["consumer",[],null],["message_content",[],null]],"object_type":"FunctionObject","name":"add","module_id":"PersQueue.ServerSupervisor","id":"add/2","doc":"Resends add task to server.\nIf the server for the consumer is running, add message to it.\nIf not, spawn a new server first and then add it.\n","arity":2},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:2","signature":[["arg",[],null]],"object_type":"FunctionObject","name":"child_spec","module_id":"PersQueue.ServerSupervisor","id":"child_spec/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:41","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"get","module_id":"PersQueue.ServerSupervisor","id":"get/1","doc":"Resends get task to server.\n","arity":1},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:2","signature":[["arg",[],null]],"object_type":"FunctionObject","name":"init","module_id":"PersQueue.ServerSupervisor","id":"init/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:57","signature":[["consumer",[],null],["message_id",[],null]],"object_type":"FunctionObject","name":"reject","module_id":"PersQueue.ServerSupervisor","id":"reject/2","doc":"Resends reject task to server.\n","arity":2},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:9","signature":[],"object_type":"FunctionObject","name":"start_link","module_id":"PersQueue.ServerSupervisor","id":"start_link/0","doc":"Starts the supervision tree\n","arity":0},{"type":"def","source":"lib/pers_queue/server_supervisor.ex:19","signature":[["consumer",[],null]],"object_type":"FunctionObject","name":"start_server","module_id":"PersQueue.ServerSupervisor","id":"start_server/1","doc":"Starts a `PersQueue.Server` for the given consumer\n","arity":1},{"type":"def","source":"lib/pers_queue/supervisor.ex:2","signature":[["arg",[],null]],"object_type":"FunctionObject","name":"child_spec","module_id":"PersQueue.Supervisor","id":"child_spec/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/supervisor.ex:2","signature":[["arg",[],null]],"object_type":"FunctionObject","name":"init","module_id":"PersQueue.Supervisor","id":"init/1","doc":false,"arity":1},{"type":"def","source":"lib/pers_queue/supervisor.ex:9","signature":[],"object_type":"FunctionObject","name":"start_link","module_id":"PersQueue.Supervisor","id":"start_link/0","doc":"Starts the supervision tree for `PersQueue`\n","arity":0}],"language":"elixir","git_repo_url":"https://github.com/astorre88/pers_queue.git","client_version":"0.5.6","client_name":"inch_ex","branch_name":"master","args":[]}